<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="ca"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="genweb.tfemarket">

    <body>
        <metal:override fill-slot="top_slot"
                        tal:define="disable_column_one python:request.set('disable_plone.leftcolumn',1);"/>
        <metal:content-core fill-slot="content-core">
            <metal:block define-macro="content-core">
                <div metal:use-macro="context/batch_macros/macros/navigation" />
                  <div id="offerData" class="offerData"
                       tal:define="applications python:view.getApplications(context)">
                    <ul class="nav nav-tabs" data-tabs="tablist">
                      <li class="nav-item active">
                        <a class="nav-link" data-toggle="tab"
                           tal:attributes="href string:#offer-data;
                                           id string:offer-data-tab"
                           i18n:translate="">Offer</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" data-toggle="tab"
                           tal:attributes="href string:#offer-req;
                                           id string:offer-mod-req"
                           i18n:translate="">Requirements</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" data-toggle="tab"
                           tal:attributes="href string:#offer-mod;
                                           id string:offer-mod-tab"
                           i18n:translate="">Modality</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" data-toggle="tab"
                           tal:attributes="href string:#offer-opt;
                                           id string:offer-opt-tab"
                           i18n:translate="">Options</a>
                      </li>
                      <li class="nav-item" tal:condition="applications">
                        <a class="nav-link" data-toggle="tab"
                           tal:attributes="href string:#offer-applications;
                                           id string:offer-applications-tab"
                           i18n:translate="">Applications</a>
                      </li>
                    </ul>
                    <div class="tab-content">
                      <div class="data tab-pane fade show active in" role="tabpanel"
                           tal:attributes="id string:offer-data;
                                           aria-labelledby string:offer-data-tab">
                        <div class="informacioTFE">
                          <div class="leftInfoOffer">
                            <p class="identifier">
                              <span class="field"><span i18n:translate="">Identifier</span>: </span>
                              <span tal:content="context/offer_id">123456 AB</span>
                            </p>
                          </div>
                          <div class="rightInfoOffer">
                            <p class="effectiveDate" tal:condition="context/effective_date">
                              <span class="field"><span i18n:translate="">Publication date</span>: </span>
                              <span tal:content="python: view.formatDate(context.effective_date)">2018/01/29</span>
                            </p>
                            <p class="expirationDate" tal:condition="context/expiration_date">
                              <span class="field"><span i18n:translate="">Expiration date</span>: </span>
                              <span tal:content="python: view.formatDate(context.expiration_date)">2018/04/29</span>
                            </p>
                          </div>
                          <div class="leftInfoOffer">
                            <p class="teacher">
                              <span class="field"><span i18n:translate="">Teacher manager</span>: </span>
                              <span tal:content="context/teacher_manager">Aureli Condogvia</span>
                            </p>
                            <p class="teacherEmail">
                              <span class="field"><span i18n:translate="">Teacher Email</span>: </span>
                              <span tal:content="context/teacher_email">???@???.???</span>
                            </p>
                            <p class="departament">
                              <span class="field"><span i18n:translate="">Departament</span>: </span>
                              <span tal:content="context/dept">37</span>
                            </p>
                          </div>
                          <div class="leftInfoOffer">
                            <div class="description">
                              <span class="field"><span i18n:translate="">Description</span>: </span>
                              <p tal:content="context/description">Nam fermentum tellus vel tellus imperdiet, consectetur finibus sem mattis. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Curabitur eu maximus nulla, vitae rhoncus sem. Pellentesque efficitur, tellus vel luctus dictum, nunc tellus cursus nulla, eget aliquam lacus lacus non lectus. Nam molestie ex dolor, quis pulvinar tortor volutpat rutrum. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Suspendisse nec ligula sit amet quam hendrerit vestibulum. Nunc ut mauris lorem. Praesent non sollicitudin eros, non vestibulum erat. Nulla facilisi.</p>
                            </div>
                          </div>
                          <div class="leftInfoOffer">
                            <p class="degrees" tal:condition="python: len(context.degree) == 1">
                              <span class="field"><span i18n:translate="">Degree</span>: </span>
                              <tal:block tal:repeat="degree context/degree">
                                <span tal:content="python: view.getDegreeLiteralFromId(degree)">Degree</span>
                              </tal:block>
                            </p>
                            <div class="degrees" tal:condition="python: len(context.degree) > 1">
                              <span class="field"><span i18n:translate="">Degrees</span>: </span>
                              <ul tal:repeat="degree context/degree">
                                <li class="degree" tal:content="python: view.getDegreeLiteralFromId(degree)">Degree</li>
                              </ul>
                            </div>
                          </div>
                          <div class="leftInfoOffer" tal:condition="context/topic">
                            <p class="topic">
                              <span class="field"><span i18n:translate="">Topic</span>: </span>
                              <span tal:content="context/topic">Topic</span>
                            </p>
                          </div>
                          <div class="leftInfoOffer" tal:condition="context/keys">
                            <p class="keywords">
                              <span class="field"><span i18n:translate="">Keywords</span>: </span>
                              <tal:block tal:repeat="keyword context/keys">
                                <span class="keyword" tal:content="keyword">Keyword</span>
                              </tal:block>
                            </p>
                          </div>
                          <div class="bottomLinks" tal:condition="view/checkPermissionCreateApplications">
                            <button type="submit" class="link">
                              <a href="++add++genweb.tfemarket.application" i18n:translate="">Request the offer</a>
                            </button>
                          </div>
                        </div>
                      </div>
                      <div class="data tab-pane fade" role="tabpanel"
                           tal:attributes="id string:offer-req;
                                           aria-labelledby string:offer-data-req">
                        <div class="informacioTFE">
                          <div class="leftInfoOffer">
                            <p class="numStudents">
                              <span class="field"><span i18n:translate="">Number of students</span>: </span>
                              <span tal:content="context/num_students">1</span>
                            </p>
                            <p class="workload">
                              <span class="field"><span i18n:translate="">Workload</span>: </span>
                              <span tal:content="context/workload">Workload</span>
                            </p>
                          </div>
                          <div class="leftInfoOffer">
                            <p class="targets">
                              <span class="field"><span i18n:translate="">Targets</span>: </span>
                              <span class="raw" tal:content="python: view.getRaw(context.targets)">Sed quis pretium urna. Aenean at elit non est posuere vestibulum a sit amet nisl. Integer efficitur aliquam arcu sit amet pulvinar. Phasellus tincidunt elementum tortor egestas tincidunt. Aenean elementum nec massa aliquam porttitor.</span>
                            </p>
                          </div>
                          <div class="leftInfoOffer">
                            <p class="features">
                              <span class="field"><span i18n:translate="">Features</span>: </span>
                              <span class="raw" tal:content="python: view.getRaw(context.features)">Sed quis pretium urna. Aenean at elit non est posuere vestibulum a sit amet nisl. Integer efficitur aliquam arcu sit amet pulvinar. Phasellus tincidunt elementum tortor egestas tincidunt. Aenean elementum nec massa aliquam porttitor.</span>
                            </p>
                          </div>
                          <div class="leftInfoOffer">
                            <p class="requirements">
                              <span class="field"><span i18n:translate="">Requirements</span>: </span>
                              <span class="raw" tal:content="python: view.getRaw(context.requirements)">Sed quis pretium urna. Aenean at elit non est posuere vestibulum a sit amet nisl. Integer efficitur aliquam arcu sit amet pulvinar. Phasellus tincidunt elementum tortor egestas tincidunt. Aenean elementum nec massa aliquam porttitor.</span>
                            </p>
                          </div>
                          <div class="leftInfoOffer" tal:condition="python: len(context.lang) > 0">
                            <p class="language" tal:condition="python: len(context.lang) == 1">
                              <span class="field"><span i18n:translate="">Language work elaboration</span>: </span>
                              <tal:block tal:repeat="lang context/lang">
                                <span class="lang" tal:content="lang">Language</span>
                              </tal:block>
                            </p>
                            <div class="language" tal:condition="python: len(context.lang) > 1">
                              <span class="field"><span i18n:translate="">Languages work elaboration</span>: </span>
                              <ul tal:repeat="lang context/lang">
                                <li class="lang" tal:content="lang">Language</li>
                              </ul>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="data tab-pane fade" role="tabpanel"
                           tal:attributes="id string:offer-mod;
                                           aria-labelledby string:offer-data-mod">
                        <div class="informacioTFE">
                          <div class="leftInfoOffer">
                            <p class="modality">
                              <span class="field"><span i18n:translate="">Modality</span>: </span>
                              <span tal:content="context/modality">Modalitat</span>
                            </p>
                          </div>
                          <div class="leftInfoOffer">
                            <p class="coManager">
                              <span class="field"><span i18n:translate="">CoManager</span>: </span>
                              <span tal:content="context/co_manager">CoManager</span>
                            </p>
                            <p class="company">
                              <span class="field"><span i18n:translate="">Company</span>: </span>
                              <span tal:content="context/company">Company</span>
                            </p>
                            <p class="companyContact">
                              <span class="field"><span i18n:translate="">Company Contact</span>: </span>
                              <span tal:content="context/company_contact">Company Contact</span>
                            </p>
                            <p class="companyEmail">
                              <span class="field"><span i18n:translate="">Company Email</span>: </span>
                              <span tal:content="context/company_email">Company Email</span>
                            </p>
                          </div>
                        </div>
                      </div>
                      <div class="data tab-pane fade" role="tabpanel"
                           tal:attributes="id string:offer-opt;
                                           aria-labelledby string:offer-opt-tab">
                        <div class="informacioTFE">
                          <div class="leftInfoOffer">
                            <p class="environmentalTheme">
                              <span class="field"><span i18n:translate="">Environmental theme</span>: </span>
                              <span tal:condition="context/environmental_theme" i18n:translate="">Yes</span>
                              <span tal:condition="not: context/environmental_theme" i18n:translate="">No</span>
                            </p>
                            <p class="grant">
                              <span class="field"><span i18n:translate="">Possibility of scholarship</span>: </span>
                              <span tal:condition="context/grant" i18n:translate="">Yes</span>
                              <span tal:condition="not: context/grant" i18n:translate="">No</span>
                            </p>
                            <p class="confidential">
                              <span class="field"><span i18n:translate="">Confidential</span>: </span>
                              <span tal:condition="context/confidential" i18n:translate="">Yes</span>
                              <span tal:condition="not: context/confidential" i18n:translate="">No</span>
                            </p>
                            <p class="scopeCooperation">
                              <span class="field"><span i18n:translate="">Scope of cooperation</span>: </span>
                              <span tal:condition="context/scope_cooperation" i18n:translate="">Yes</span>
                              <span tal:condition="not: context/scope_cooperation" i18n:translate="">No</span>
                            </p>
                          </div>
                        </div>
                      </div>
                      <div tal:condition="applications" class="applications tab-pane fade"
                           role="tabpanel"
                           tal:attributes="id string:offer-applications;
                                           aria-labelledby string:offer-applications-tab">
                        <table class="tableApplications">
                          <thead>
                            <tr>
                              <th i18n:translate="">DNI</th>
                              <th i18n:translate="">Name</th>
                              <th i18n:translate="">Degree</th>
                              <th i18n:translate="">Identifier Offer TFE</th>
                              <th i18n:translate="">Mobile</th>
                              <th></th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr tal:repeat="app applications">
                              <td tal:content="app/dni">DNI</td>
                              <td tal:content="app/name">Name</td>
                              <td>Degree</td>
                              <td>Identifier Offer TFE</td>
                              <td>Mobile</td>
                              <td class="actions">
                                <span class="workflowsAction">
                                  <button class="label dropdown-toggle bullet-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" tal:condition="app/workflows">
                                    <span tal:content="app/state">State</span>
                                    <span class="caret"></span>
                                  </button>
                                  <span class="workflow notclick label" tal:content="app/state" tal:condition="not: app/workflows">State</span>
                                  <ul class="dropdown-menu estatsToggle" role="menu" aria-labelledby="estats"
                                      tal:condition="app/workflows">
                                    <tal:block repeat="estat app/workflows">
                                      <li>
                                        <a tal:attributes="href string:changeActualState?estat=${estat/id}&id=${app/item_path}">
                                          <span tal:content="estat/title">Estat</span></a>
                                      </li>
                                    </tal:block>
                                  </ul>
                                </span>
                                <a class="label edit" i18n:attributes="alt edit" tal:attributes="href string:${app/url}/edit"
                                   tal:condition="app/can_edit">
                                  <span class="fa fa-pencil" aria-hidden="true"></span>
                                </a>
                                <a class="label" i18n:attributes="alt view" tal:attributes="href string:${app/url}/view">
                                  <span class="fa fa-folder-open" aria-hidden="true"></span>
                                </a>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                  <script type="text/javascript">
                  $(function() {
                    $('.informacioTFE .raw').each(function(){
                      $(this).html( $(this).text() );
                    });
                    if (window.location.href.endsWith("#offer-applications")) {
                      $("#offer-applications-tab").trigger("click");
                    }
                  });
                  </script>
            </metal:block>
        </metal:content-core>
    </body>
</html>
