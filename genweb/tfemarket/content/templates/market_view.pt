<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    lang="ca"
    metal:use-macro="context/main_template/macros/master"
    i18n:domain="genweb.tfemarket">
    <body>
        <metal:override fill-slot="top_slot"
            tal:define="disable_column_one python:request.set('disable_plone.leftcolumn',1);"/>
        <metal:content-core fill-slot="content-core">
            <metal:block define-macro="content-core"
                tal:define="offers view/getOffers">
                <div metal:use-macro="context/batch_macros/macros/navigation" />
                <div id="market" tal:define="save view/saveFilters; userApplications view/userApplications; isConfigured view/showErrorNotConfigured">
                    <div class="loaderContainer">
                        <div class="loader"></div>
                    </div>
                    <div class="offerInfo alert alert-error" role="alert" tal:condition="view/showErrorBusSOA">
                        <button data-dismiss="alert" class="close" type="button">Ã—</button>
                        <strong>Error</strong>
                        <span i18n:translate="">SOA bus not configured. Contact the site administrator.</span>
                    </div>
                    <div id="userApplication" tal:condition="userApplications">
                        <h2 i18n:translate="">Your application</h2>
                        <table class="tableApplications">
                            <thead>
                                <tr>
                                    <th i18n:translate="">Degree</th>
                                    <th i18n:translate="">Identifier Offer TFE</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr tal:repeat="app userApplications">
                                    <td tal:content="app/degree_title">Degree</td>
                                    <td><a tal:content="python:app['offer_id'] + ' ' + app['offer_title']"
                                        tal:attributes="href python:'?searchOffer&offer=' + app['offer_id']">Identifier Offer TFE</a></td>
                                    <td class="actions">
                                        <span class="workflowsAction">
                                            <span class="workflow notclick label" tal:content="app/state"
                                                  i18n:domain="genweb.tfemarket.workflow" i18n:translate=""
                                                  tal:condition="not: app/workflows">
                                                State
                                            </span>
                                            <button class="label dropdown-toggle bullet-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" tal:condition="app/workflows">
                                            <span i18n:domain="genweb.tfemarket.workflow" i18n:translate=""
                                                  tal:content="app/state">
                                                State
                                            </span>
                                            <span class="caret"></span>
                                            </button>
                                            <ul class="dropdown-menu estatsToggle" role="menu" aria-labelledby="estats"
                                                tal:condition="app/workflows">
                                                <tal:block repeat="estat app/workflows">
                                                    <li>
                                                        <a tal:attributes="href string:changeActualState?estat=${estat/id}&id=${app/item_path}&${view/filtersString}">
                                                            <span i18n:domain="genweb.tfemarket.workflow" i18n:translate=""
                                                                  tal:content="estat/title">
                                                                Estat
                                                        </span>
                                                        </a>
                                                    </li>
                                                </tal:block>
                                            </ul>
                                        </span>
                                        <a class="label edit" i18n:attributes="alt edit" tal:attributes="href string:${app/url}/edit"
                                            tal:condition="app/can_edit">
                                            <span class="fa fa-pencil" aria-hidden="true"></span>
                                        </a>
                                        <button class="label" data-toggle="modal" tal:attributes="data-target string:#modal${app/UID}">
                                            <span class="sign">+</span>
                                            <span>Info</span>
                                        </button>
                                        <div tal:attributes="id string:modal${app/UID}" class="modal fade" role="dialog">
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                        <h4 class="modal-title" i18n:translate="">Description</h4>
                                                    </div>
                                                    <div class="modal-body informacioTFE">
                                                        <div class="leftInfoOffer">
                                                            <p class="offerID">
                                                                <span class="field"><span i18n:translate="">Offer id</span>: </span>
                                                                <span tal:content="app/offer_id"></span>
                                                            </p>
                                                            <p class="offerTitle">
                                                                <span class="field"><span i18n:translate="">Offer title</span>: </span>
                                                                <span tal:content="app/offer_title"></span>
                                                            </p>
                                                        </div>
                                                        <div class="leftInfoOffer">
                                                            <p class="fullname">
                                                                <span class="field"><span i18n:translate="">Fullname</span>: </span>
                                                                <span tal:content="app/title"></span>
                                                            </p>
                                                            <p class="dni">
                                                                <span class="field"><span i18n:translate="">DNI</span>: </span>
                                                                <span tal:content="app/dni"></span>
                                                            </p>
                                                            <p class="email">
                                                                <span class="field"><span i18n:translate="">Email</span>: </span>
                                                                <a tal:content="app/email"
                                                                      tal:attributes="href string:mailto:${app/email}"></a>
                                                            </p>
                                                            <p class="telephone">
                                                                <span class="field"><span i18n:translate="">Telephone</span>: </span>
                                                                <span tal:content="app/phone"></span>
                                                            </p>
                                                        </div>
                                                        <div class="leftInfoOffer" tal:condition="app/body">
                                                            <div class="description">
                                                                <span class="field"><span i18n:translate="">Body</span>: </span>
                                                                <p tal:content="app/body"></p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-default" data-dismiss="modal" i18n:translate="">
                                                            Close
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="clearfix"></div>
                    <div id="offersList" tal:define="classViewSearch view/classViewSearch">
                        <div id="headerListOffers">
                            <div class="offerInfo alert alert-error" role="alert" tal:condition="isConfigured">
                                <button data-dismiss="alert" class="close" type="button">Ã—</button>
                                    <strong>Error</strong>
                                <span i18n:translate="">Falta carregar les titulacions.</span>
                            </div>
                            <div class="buttonsRight documentDescription">
                                <tal:co condition="view/checkPermissionCreateOffers">
                                    <a href="++add++genweb.tfemarket.offer">
                                        <button type="submit" class="link">
                                            <span i18n:translate="">Create an offer</span>
                                        </button>
                                    </a>
                                </tal:co>
                                <span id="buttonsSearch">
                                    <span id="expandSearch" tal:attributes="class classViewSearch/expand">
                                        <span i18n:translate="">Show search</span> <i class="fa fa-chevron-down" aria-hidden="true"></i>
                                    </span>
                                    <span id="collapseSearch" tal:attributes="class classViewSearch/collapse">
                                        <span i18n:translate="">Hide search</span> <i class="fa fa-chevron-up" aria-hidden="true"></i>
                                    </span>
                                </span>
                                <span id="buttonsAllOffers" class="hidden-phone" tal:condition="offers">
                                    <span id="expandAll" i18n:translate="">Desplega tot <i class="fa fa-chevron-down" aria-hidden="true"></i></span>
                                    <span id="collapseAll" i18n:translate="">Plega tot <i class="fa fa-chevron-up" aria-hidden="true"></i></span>
                                </span>
                                <div class="pull-right infoTfemarket">
                                    <a i18n:attributes="alt info; title info" href="manual-dus">
                                        <i class="fa fa-info-circle"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div id="searchOffers">
                            <form id="formSearchOffers" name="searchOffers" action="?search" method="post"
                                tal:attributes="data-saved python: 0 if save.has_key('language') else 1;
                                class classViewSearch/collapse">
                                <h2 i18n:translate="">Quines ofertes cerques?</h2>
                                <div>
                                    <label i18n:translate="">Text to search</label>
                                    <input type="text" id="searchTitle" name="title" tal:attributes="value save/title|nothing" />
                                </div>
                                <div class="row-fluid">
                                    <div class="span9">
                                        <label i18n:translate="">Degree</label>
                                        <select id="searchDegree" name="degree">
                                            <tal:block tal:condition="view/getDegrees" tal:repeat="degree view/getDegrees">
                                                <tal:block tal:define="selected python: save.has_key('degree') and not save['degree'] == 'a' and degree['id'] == save['degree']">
                                                    <option tal:attributes="value degree/id; selected python: True if selected else False" tal:content="degree/lit">Degree</option>
                                                </tal:block>
                                            </tal:block>
                                        </select>
                                    </div>
                                    <div class="span3">
                                        <label i18n:translate="">Topic</label>
                                        <select id="searchDegree" name="topic" tal:define="topics view/getTopics">
                                            <option value="a" i18n:translate="">MAll</option>
                                            <tal:block tal:condition="topics" tal:repeat="topic topics">
                                                <tal:block tal:define="selected python: save.has_key('topic') and not save['topic'] == 'a' and topic == save['topic']">
                                                    <option tal:attributes="value topic; selected python: True if selected else False" tal:content="topic">Topic</option>
                                                </tal:block>
                                            </tal:block>
                                        </select>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span6">
                                        <label i18n:translate="">TFEteacher</label>
                                        <select id="searchTeacher" name="teacher" tal:attributes="value save/teacher|nothing">
                                            <option value="a" i18n:translate="">MAll</option>
                                            <tal:block tal:repeat="teacher view/getTeachers">
                                                <tal:block tal:define="selected python: save.has_key('teacher') and not save['teacher'] == 'a' and teacher['id'] == save['teacher']">
                                                    <option tal:attributes="value teacher/id; selected python: True if selected else False" tal:content="teacher/lit">Teacher</option>
                                                </tal:block>
                                            </tal:block>
                                        </select>
                                    </div>
                                    <div class="span3">
                                        <label i18n:translate="">TFEdepartament</label>
                                        <select id="searchDepartament" name="departament" tal:attributes="value save/departament|nothing">
                                            <option value="a" i18n:translate="">MAll</option>
                                            <tal:block tal:repeat="departament view/getDepartaments">
                                                <tal:block tal:define="selected python: save.has_key('departament') and not save['departament'] == 'a' and departament == save['departament']">
                                                    <option tal:attributes="value departament; selected python: True if selected else False" tal:content="departament">Departament</option>
                                                </tal:block>
                                            </tal:block>
                                        </select>
                                    </div>
                                    <div class="span3">
                                        <label i18n:translate="">Type</label>
                                        <select id="searchType" name="type" tal:attributes="value save/type|nothing">
                                            <tal:block tal:repeat="type view/getTypes">
                                                <tal:block tal:define="selected python: save.has_key('type') and type['id'] == save['type']">
                                                    <option tal:attributes="value type/id; selected python: True if selected else False" tal:content="type/lit">
                                                        Type
                                                    </option>
                                                </tal:block>
                                            </tal:block>
                                        </select>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span6">
                                        <label i18n:translate="">Company</label>
                                        <select id="searchCompany" name="company" tal:attributes="value save/company|nothing">
                                            <option value="a" i18n:translate="">All</option>
                                            <tal:block tal:repeat="company view/getCompanys">
                                                <tal:block tal:define="selected python: save.has_key('company') and not save['company'] == 'a' and company == save['company']">
                                                    <option tal:attributes="value company; selected python: True if selected else False" tal:content="company">Company</option>
                                                </tal:block>
                                            </tal:block>
                                        </select>
                                    </div>
                                    <div class="span3">
                                        <label i18n:translate="">Date</label>
                                        <select id="searchDate" name="date">
                                            <tal:block tal:repeat="date view/getDates">
                                                <tal:block tal:define="selected python: save.has_key('date') and date['id'] == save['date']">
                                                    <option tal:attributes="value date/id; selected python: True if selected else False" tal:content="date/lit">
                                                        Date
                                                    </option>
                                                </tal:block>
                                            </tal:block>
                                        </select>
                                    </div>
                                    <div class="span3">
                                        <label i18n:translate="">State</label>
                                        <select id="searchState" name="state">
                                            <option value="a" i18n:translate="">MAll</option>
                                            <tal:block tal:repeat="state view/getStates">
                                                <tal:block tal:define="selected python: save.has_key('state') and state['id'] == save['state']">
                                                    <option tal:attributes="value state/id; selected python: True if selected else False" tal:content="state/lit" i18n:domain="genweb.tfemarket.workflow" i18n:translate="">
                                                        State
                                                    </option>
                                                </tal:block>
                                            </tal:block>
                                        </select>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div id="searchLanguage" class="multicheck span6">
                                        <label i18n:translate="">Developer language</label>
                                        <span class="multicheckOptions">
                                            <span tal:repeat="lang view/getLanguages">
                                                <tal:block tal:define="selected python: save.has_key('language') and view.flattenedString(lang) in save['language']">
                                                    <input type="checkbox" name="language" tal:attributes="value lang; checked python: True if selected else False" />
                                                    <span i18n:translate="" tal:content="lang">Language</span>
                                                </tal:block>
                                            </span>
                                        </span>
                                    </div>
                                    <div id="searchModality" class="multicheck span3">
                                        <label i18n:translate="">Modality</label>
                                        <span class="multicheckOptions">
                                            <span tal:repeat="modality view/getModalities">
                                                <tal:block tal:define="selected python: save.has_key('modality') and modality['id'] in save['modality']">
                                                    <input type="checkbox" name="modality" tal:attributes="value modality/id; checked python: True if selected else False" />
                                                    <span tal:content="modality/lit">Modality</span>
                                                </tal:block>
                                            </span>
                                        </span>
                                    </div>
                                    <div id="searchGrants" class="span3">
                                        <label i18n:translate="">grant</label>
                                        <label class="switch">
                                            <input type="checkbox" id="searchGrant" name="grant" tal:attributes="checked python: True if save.has_key('grant') else False"/>
                                            <span class="slider round"></span>
                                        </label>
                                    </div>
                                </div>
                                <div id="searchKeys" class="multicheck" tal:condition="view/getKeys">
                                    <label i18n:translate="">Keywords</label>
                                    <div class="multicheckOptionsKeys">
                                        <tal:block tal:repeat="key view/getKeys">
                                            <span tal:define="selected python: save.has_key('key') and view.flattenedString(key) in save['key']" tal:attributes="class python: 'keyword checked' if selected else 'keyword'">
                                                <input type="checkbox" name="key" tal:attributes="value key; checked python: True if selected else False" />
                                                <span tal:content="key">Key</span>
                                            </span>
                                        </tal:block>
                                    </div>
                                </div>
                                <div class="bottomLinks">
                                    <a href="" class="btnTFE" tal:condition="view/currentUserIsAloneTeacher"
                                        i18n:translate="">
                                    View me offers
                                    </a>
                                    <a href="?allOffers" class="btnTFE secundaryBtnTFE"
                                        i18n:translate="">
                                    View all offers
                                    </a>
                                    <button type="submit" id="offersFilter" form="offersFilter">
                                        <span class="fa fa-search"></span>
                                        <span i18n:translate="">Search</span>
                                    </button>
                                </div>
                            </form>
                        </div>
                        <p id="notResults" tal:condition="not: offers" i18n:translate="">
                            No results found.
                        </p>
                        <ul id="list" tal:condition="offers">
                            <tal:offers repeat="offer offers">
                                <li class="unstyled offer" tal:define="applications python:view.getApplications(offer)">
                                    <div class="puntTitle row-fluid">
                                        <div class="fletxa span1">
                                            <button type="button" class="expand"
                                                data-original-title="Expand"
                                                tal:attributes="id offer/offer_id">
                                            <i class="fa fa-chevron-down" aria-hidden="true"></i>
                                            </button>
                                            <button type="button" class="notexpand"
                                                data-original-title="Collapse">
                                            <i class="fa fa-chevron-up" aria-hidden="true"></i>
                                            </button>
                                        </div>
                                        <div class="title span5">
                                            <h3>
                                                <tal:omit-tag tal:content="offer/title">Item Title</tal:omit-tag>
                                                <span tal:condition="offer/is_expired" i18n:translate="">expired</span>
                                            </h3>
                                        </div>
                                        <div class="type span1">
                                            <p class="field" tal:repeat="tfgm offer/tfgm" tal:content="tfgm">TFG</p>
                                        </div>
                                        <div class="top span3">
                                            <p class="teacher">
                                                <span class="field"><span i18n:translate="">Teacher manager</span>: </span>
                                                <span tal:content="offer/teacher_fullname">Aureli Condogvia</span>
                                            </p>
                                            <p class="codirector" tal:condition="offer/codirector">
                                                <span class="field"><span i18n:translate="">Codirector</span>: </span>
                                                <span tal:content="offer/codirector">Codirector</span>
                                            </p>
                                        </div>
                                        <div class="rightInfoOffer actions span2">
                                            <span class="workflowsAction">
                                                <button class="label dropdown-toggle bullet-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" tal:condition="offer/workflows">
                                                    <span i18n:domain="genweb.tfemarket.workflow" i18n:translate=""
                                                          tal:content="offer/state">
                                                          State
                                                      </span>
                                                    <span class="caret"></span>
                                                </button>
                                                <span class="workflow notclick label" tal:content="offer/state"
                                                      i18n:domain="genweb.tfemarket.workflow" i18n:translate=""
                                                      tal:condition="not: offer/workflows">
                                                  State
                                              </span>
                                                <ul class="dropdown-menu estatsToggle" role="menu" aria-labelledby="estats"
                                                    tal:condition="offer/workflows">
                                                    <tal:block repeat="estat offer/workflows">
                                                        <li>
                                                            <a tal:attributes="href string:changeActualState?estat=${estat/id}&id=${offer/item_path}&offer=${offer/offer_id}${view/getActualView}">
                                                                <span i18n:domain="genweb.tfemarket.workflow" i18n:translate=""
                                                                      tal:content="estat/title">
                                                                    Estat
                                                                </span>
                                                            </a>
                                                        </li>
                                                    </tal:block>
                                                </ul>
                                            </span>
                                            <a class="label edit" i18n:attributes="alt edit; title edit"
                                                tal:attributes="href string:${offer/url}/edit"
                                                tal:condition="offer/can_edit">
                                                <span class="fa fa-pencil" aria-hidden="true"></span>
                                            </a>
                                        </div>
                                    </div>
                                    <div class="offerData">
                                        <div tal:attributes="id string:${offer/offer_id}-info" class="offerInfo"></div>
                                        <tal:block tal:condition="applications">
                                            <div class="alert alert-info offerInfo" role="alert" tal:condition="offer/assign_offer">
                                                <button data-dismiss="alert" class="close" type="button">Ã—</button>
                                                <strong i18n:translate="">
                                                    Info
                                                </strong>
                                                <tal:msg i18n:translate="">
                                                    The current offer contains a confirmed application.
                                                </tal:msg>
                                                <a class="btn btn-success" i18n:translate=""
                                                    tal:attributes="href string:changeActualState?estat=${offer/assign_offer}&id=${offer/item_path}&offer=${offer/offer_id}${view/getActualView}">
                                                    Assign the offer
                                                </a>
                                            </div>
                                        </tal:block>
                                        <div class="alert alert-alert offerInfo" role="alert" tal:condition="offer/is_expired">
                                            <button data-dismiss="alert" class="close" type="button">Ã—</button>
                                            <strong i18n:translate="">
                                                Alert
                                            </strong>
                                            <tal:msg i18n:translate="">
                                                The offer is expired.
                                            </tal:msg>
                                        </div>
                                        <div class="data" tal:define="view_applications python: view.openApplicationsTav() and applications">
                                            <div class="informacioTFE">
                                                <div class="row-fluid">
                                                    <div class="span6">
                                                        <div class="leftInfoOffer">
                                                            <p class="teacher">
                                                                <span class="field"><span i18n:translate="">Teacher manager</span>: </span>
                                                                <span tal:content="offer/teacher_fullname">Aureli Condogvia</span>
                                                            </p>
                                                            <p class="teacherEmail">
                                                                <span class="field"><span i18n:translate="">Teacher Email</span>: </span>
                                                                <a tal:content="offer/teacher_email"
                                                                   tal:attributes="href string:mailto:${offer/teacher_email}">???@???.???</a>
                                                            </p>
                                                            <p class="departament">
                                                                <span class="field"><span i18n:translate="">Departament</span>: </span>
                                                                <span tal:content="offer/dept">Departament</span>
                                                            </p>
                                                        </div>

                                                        <div class="leftInfoOffer">
                                                            <p class="codirector" tal:condition="offer/codirector">
                                                                <span class="field"><span i18n:translate="">Codirector</span>: </span>
                                                                <span tal:content="offer/codirector">Aureli Condogvia</span>
                                                            </p>
                                                            <p class="codirectorEmail" tal:condition="offer/codirector_email">
                                                                <span class="field"><span i18n:translate="">Codirector Email</span>: </span>
                                                                <a tal:content="offer/codirector_email"
                                                                   tal:attributes="href string:mailto:${offer/codirector_email}">???@???.???</a>
                                                            </p>
                                                            <p class="codirectorDepartament" tal:condition="offer/codirector_dept">
                                                                <span class="field"><span i18n:translate="">Departament</span>: </span>
                                                                <span tal:content="offer/codirector_dept">Departament</span>
                                                            </p>
                                                        </div>
                                                        <div class="leftInfoOffer">
                                                            <div class="degrees">
                                                                <span class="field"><span i18n:translate="">Degrees</span>: </span>
                                                                <ul tal:repeat="degree offer/degrees">
                                                                    <li class="degree" tal:content="python: view.getDegreeLiteralFromId(degree)">Degree</li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="span6">
                                                        <div class="leftInfoOffer">
                                                            <p class="offer_id">
                                                                <span class="field"><span i18n:translate="">Offer id</span>: </span>
                                                                <span tal:content="offer/offer_id">Identificador</span>
                                                            </p>
                                                        </div>
                                                        <div class="leftInfoOffer">
                                                            <p class="modality">
                                                                <span class="field"><span i18n:translate="">Modality</span>: </span>
                                                                <span tal:content="offer/modality">Modalitat</span>
                                                            </p>
                                                            <tal:block tal:condition="offer/if_modality_company">
                                                                <p class="company">
                                                                    <span class="field"><span i18n:translate="">Company</span>: </span>
                                                                    <span tal:content="offer/company">Company</span>
                                                                </p>
                                                            </tal:block>
                                                            <p class="grant">
                                                                <span class="field"><span i18n:translate="">Possibility of scholarship</span>: </span>
                                                                <span tal:condition="offer/grant" i18n:translate="">Yes</span>
                                                                <span tal:condition="not: offer/grant" i18n:translate="">No</span>
                                                            </p>
                                                        </div>
                                                        <div class="leftInfoOffer">
                                                            <p class="language" tal:condition="not: offer/multiple_langs">
                                                                <span class="field"><span i18n:translate="">Language work elaboration</span>: </span>
                                                                <tal:block tal:repeat="lang offer/langs">
                                                                    <span class="lang" i18n:translate="" tal:content="lang">Language</span>
                                                                </tal:block>
                                                            </p>
                                                            <div class="language" tal:condition="offer/multiple_langs">
                                                                <span class="field"><span i18n:translate="">Languages work elaboration</span>: </span>
                                                                <ul tal:repeat="lang offer/langs">
                                                                    <li class="lang" i18n:translate="" tal:content="lang">Language</li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                        <div class="leftInfoOffer" tal:condition="offer/keywords">
                                                            <p class="keywords">
                                                                <span class="field"><span i18n:translate="">Keywords</span>: </span>
                                                                <tal:block tal:repeat="keyword offer/keywords">
                                                                    <span class="keyword" tal:content="keyword">Keyword</span>
                                                                </tal:block>
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="leftInfoOffer" tal:condition="offer/description">
                                                    <div class="description">
                                                        <span class="field"><span i18n:translate="">Description</span>: </span>
                                                        <p tal:content="offer/description">Nam fermentum tellus vel tellus imperdiet, consectetur finibus sem mattis. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Curabitur eu maximus nulla, vitae rhoncus sem. Pellentesque efficitur, tellus vel luctus dictum, nunc tellus cursus nulla, eget aliquam lacus lacus non lectus. Nam molestie ex dolor, quis pulvinar tortor volutpat rutrum. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Suspendisse nec ligula sit amet quam hendrerit vestibulum. Nunc ut mauris lorem. Praesent non sollicitudin eros, non vestibulum erat. Nulla facilisi.</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="informacioTFE">
                                                <div class="moreInfo hide">
                                                    <div class="leftInfoOffer">
                                                        <p class="topic" tal:condition="offer/topic">
                                                            <span class="field"><span i18n:translate="">Topic</span>: </span>
                                                            <span tal:content="offer/topic">Topic</span>
                                                        </p>
                                                        <p class="type" tal:condition="offer/offer_type">
                                                            <span class="field"><span i18n:translate="">Type</span>: </span>
                                                            <span i18n:translate="" tal:content="offer/offer_type">Type</span>
                                                        </p>
                                                        <p class="numStudents" tal:condition="view/showNumEstudiants">
                                                            <span class="field"><span i18n:translate="">Number of students</span>: </span>
                                                            <span tal:content="offer/num_students">1</span>
                                                        </p>
                                                    </div>
                                                    <div class="leftInfoOffer">
                                                        <div class="workload" tal:condition="offer/workload">
                                                            <span class="field"><span i18n:translate="">Workload</span>: </span>
                                                            <p tal:content="offer/workload">Workload</p>
                                                        </div>
                                                    </div>
                                                    <div class="leftInfoOffer" tal:condition="offer/targets">
                                                        <div class="targets">
                                                            <span class="field"><span i18n:translate="">Targets</span>: </span>
                                                            <p tal:content="offer/targets"></p>
                                                        </div>
                                                    </div>
                                                    <div class="leftInfoOffer" tal:condition="offer/features">
                                                        <div class="features">
                                                            <span class="field"><span i18n:translate="">Features</span>: </span>
                                                            <p  tal:content="offer/features"></p>
                                                        </div>
                                                    </div>
                                                    <div class="leftInfoOffer" tal:condition="offer/requirements">
                                                        <div class="requirements">
                                                            <span class="field"><span i18n:translate="">Requirements</span>: </span>
                                                            <p tal:content="offer/requirements"></p>
                                                        </div>
                                                    </div>
                                                    <div class="leftInfoOffer">
                                                        <p class="environmentalTheme">
                                                            <span class="field"><span i18n:translate="">Environmental theme</span>: </span>
                                                            <span tal:condition="offer/environmental_theme" i18n:translate="">Yes</span>
                                                            <span tal:condition="not: offer/environmental_theme" i18n:translate="">No</span>
                                                        </p>
                                                        <p class="confidential">
                                                            <span class="field"><span i18n:translate="">Confidential</span>: </span>
                                                            <span tal:condition="offer/confidential" i18n:translate="">Yes</span>
                                                            <span tal:condition="not: offer/confidential" i18n:translate="">No</span>
                                                        </p>
                                                        <p class="scopeCooperation">
                                                            <span class="field"><span i18n:translate="">Scope of cooperation</span>: </span>
                                                            <span tal:condition="offer/scope_cooperation" i18n:translate="">Yes</span>
                                                            <span tal:condition="not: offer/scope_cooperation" i18n:translate="">No</span>
                                                        </p>
                                                    </div>
                                                    <div class="leftInfoOffer">
                                                        <p class="effectiveDate" tal:condition="offer/effective_date">
                                                            <span class="field"><span i18n:translate="">Publication date</span>: </span>
                                                            <span tal:content="offer/effective_date">expirationDate</span>
                                                        </p>
                                                        <p class="expirationDate" tal:condition="offer/expiration_date">
                                                            <span class="field"><span i18n:translate="">Expiration date</span>: </span>
                                                            <span tal:content="offer/expiration_date">2018/04/29</span>
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="buttonsOfferInfo">
                                                    <span class="offerMoreInfo">
                                                    <span class="litMoreInfo" i18n:translate="">More info</span>
                                                    <span class="showMoreInfo">
                                                    <i class="fa fa-chevron-down" aria-hidden="true"></i>
                                                    </span>
                                                    </span>
                                                </div>
                                                <div class="offerSeparator" tal:condition="view_applications"></div>
                                                <div tal:condition="view_applications" class="applications hide">
                                                    <table class="tableApplications">
                                                        <thead>
                                                            <tr>
                                                                <th i18n:translate="">DNI</th>
                                                                <th i18n:translate="">Name</th>
                                                                <th i18n:translate="">Email</th>
                                                                <th i18n:translate="">Mobile</th>
                                                                <th i18n:translate="">Degree</th>
                                                                <th i18n:translate="">Identifier Offer TFE</th>
                                                                <th nowrap></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr tal:repeat="app applications">
                                                                <td tal:content="app/dni">DNI</td>
                                                                <td tal:content="app/name">Name</td>
                                                                <td>
                                                                    <a tal:content="app/email"
                                                                    tal:attributes="href string:mailto:${app/email}">Email</a>
                                                                </td>
                                                                <td tal:content="app/phone">Mobile</td>
                                                                <td tal:content="app/degree_title">Degree</td>
                                                                <td tal:define="a app/offer_id;
                                                                    b app/offer_title"
                                                                    tal:content="python:app['offer_id'] + ' ' + app['offer_title']">hola</td>
                                                                <td class="actions" nowrap>
                                                                    <span class="workflowsAction">
                                                                        <button tal:attributes="class string:${app/style} label dropdown-toggle bullet-toggle"
                                                                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" tal:condition="app/workflows">
                                                                            <span i18n:domain="genweb.tfemarket.workflow" i18n:translate=""
                                                                                  tal:content="app/state">
                                                                                State
                                                                            </span>
                                                                            <span class="caret"></span>
                                                                        </button>
                                                                        <span tal:attributes="class string:${app/style} workflow notclick label"
                                                                            tal:content="app/state" tal:condition="not: app/workflows"
                                                                            i18n:domain="genweb.tfemarket.workflow" i18n:translate="">
                                                                            State
                                                                        </span>
                                                                        <ul class="dropdown-menu estatsToggle" role="menu" aria-labelledby="estats"
                                                                            tal:condition="app/workflows">
                                                                            <tal:block repeat="estat app/workflows">
                                                                                <li>
                                                                                    <a tal:attributes="href string:changeActualState?estat=${estat/id}&id=${app/item_path}&offer=${offer/offer_id}&open${view/getActualView}">
                                                                                        <span i18n:domain="genweb.tfemarket.workflow" i18n:translate=""
                                                                                              tal:content="estat/title">
                                                                                            Estat
                                                                                        </span>
                                                                                    </a>
                                                                                </li>
                                                                            </tal:block>
                                                                        </ul>
                                                                    </span>
                                                                    <a class="label edit" i18n:attributes="alt edit; title edit"
                                                                        tal:attributes="href string:${app/url}/edit"
                                                                        tal:condition="app/can_edit">
                                                                        <span class="fa fa-pencil" aria-hidden="true"></span>
                                                                    </a>
                                                                    <button class="label" data-toggle="modal" tal:condition="app/body"
                                                                        tal:attributes="data-target string:#modalApplication${app/UID}">
                                                                        <span class="sign">+</span>
                                                                        <span>Info</span>
                                                                    </button>
                                                                    <button class="label disabled" data-toggle="modal" tal:condition="not: app/body">
                                                                        <span class="sign">+</span>
                                                                        <span>Info</span>
                                                                    </button>
                                                                    <div tal:attributes="id string:modalApplication${app/UID}" class="modal fade" role="dialog">
                                                                        <div class="modal-dialog">
                                                                            <div class="modal-content">
                                                                                <div class="modal-header">
                                                                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                                                    <h4 class="modal-title" i18n:translate="">Description</h4>
                                                                                </div>
                                                                                <div class="modal-body">
                                                                                    <p tal:content="app/body">Some text in the modal.</p>
                                                                                </div>
                                                                                <div class="modal-footer">
                                                                                    <button type="button" class="btn btn-default" data-dismiss="modal" i18n:translate="">
                                                                                    Close
                                                                                    </button>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <div class="buttonsOffer">
                                                    <tal:condition tal:condition="offer/can_create_application">
                                                        <a tal:attributes="href string:requestOffer?id=${offer/item_path}&offer=${offer/offer_id}${view/getActualView}">
                                                            <button type="submit" class="link">
                                                                <span i18n:translate="">Request the offer</span>
                                                            </button>
                                                        </a>
                                                    </tal:condition>
                                                    <tal:condition tal:condition="view_applications">
                                                        <button type="submit" class="link showApplications">
                                                            <span tal:attributes="id string:${offer/offer_id}-applications"
                                                                class="showApplicationsLit" i18n:translate="">
                                                                Show applications
                                                            </span>
                                                            <span class="hideApplicationsLit" i18n:translate="">Hide applications</span>
                                                        </button>
                                                    </tal:condition>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            </tal:offers>
                        </ul>
                    </div>
                </div>
            </metal:block>
            <script type="text/javascript">
                $.urlParam = function(name) {
                    var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
                    return results ? results[1] : false;
                }

                $(function() {
                    $('input[name="language"]').click(function() {
                        if ($('input[name="language"]:checked').length == 0) {
                            $(this).prop('checked', true);
                        }
                    });

                    $('input[name="modality"]').click(function() {
                        if ($('input[name="modality"]:checked').length == 0) {
                            $(this).prop('checked', true);
                        }
                    });

                    $('.expand').click(function() {
                        $(this).hide();
                        $(this).parent().find('.notexpand').show();
                        $(this).parent().parent().parent().find('.offerData').slideDown();
                    });

                    $('.notexpand').click(function() {
                        $(this).hide();
                        $(this).parent().find('.expand').show();
                        $(this).parent().parent().parent().find('.offerData').slideUp();
                    });

                    $("#buttonsSearch").click(function() {
                        if ($("#collapseSearch").is(":visible")) {
                            $("#formSearchOffers").slideUp();
                            $("#expandSearch").show();
                            $("#collapseSearch").hide();
                        } else {
                            $("#formSearchOffers").slideDown();
                            $("#expandSearch").hide();
                            $("#collapseSearch").show();
                        }
                    });

                    $("#expandAll").click(function() {
                        $(".expand").parent().parent().parent().slideDown();
                        $(".expand").hide();
                        $(".notexpand").show();
                        $(".expand").parent().parent().parent().find('.offerData').slideDown();
                        $("#expandAll").hide();
                        $("#collapseAll").show();
                    });

                    $("#collapseAll").click(function() {
                        $(".notexpand").slideUp();
                        $(".notexpand").hide();
                        $(".expand").show();
                        $(".expand").parent().parent().parent().find('.offerData').slideUp();
                        $("#expandAll").show();
                        $("#collapseAll").hide();
                    });

                    if ($('#formSearchOffers').attr('data-saved') == 1) {
                        $('input[name="language"]').prop('checked', true);
                        $('input[name="modality"]').prop('checked', true);
                    }

                    var offer = $.urlParam('offer');
                    if (offer) {
                        $(".alert[role='alert']:not(.offerInfo)").appendTo("#" + offer + "-info");
                        $('html, body').animate({
                            scrollTop: $("#" + offer).offset().top - 50
                        }, 1000);
                        $("#" + offer).trigger('click');
                        if ($.urlParam('open')) {
                            setTimeout(function() {
                                $("#" + offer + "-applications").trigger('click');
                            }, 500);
                        }
                    }

                    $('.showMoreInfo').click(function() {
                        offerInfo = $(this).parent().parent().parent().find('.moreInfo');
                        if (offerInfo.hasClass('hide')) {
                            $(this).find('i.fa').removeClass('fa-chevron-down').addClass('fa-chevron-up');
                            offerInfo.slideDown().removeClass('hide');
                        } else {
                            $(this).find('i.fa').removeClass('fa-chevron-up').addClass('fa-chevron-down');
                            offerInfo.slideUp().addClass('hide');
                        }
                    });

                    $('.showApplications').click(function() {
                        applications = $(this).parent().parent().parent().find('.applications');
                        if (applications.hasClass('hide')) {
                            $(this).find('.showApplicationsLit').hide();
                            $(this).find('.hideApplicationsLit').show();
                            applications.slideDown().removeClass('hide');
                        } else {
                            $(applications).find('i.fa').removeClass('fa-chevron-up').addClass('fa-chevron-down')
                            $(this).find('.hideApplicationsLit').hide();
                            $(this).find('.showApplicationsLit').show();
                            applications.slideUp().addClass('hide');
                        }
                    });

                    $('#formSearchOffers .keyword').click(function() {
                        input = $(this).find('input[name="key"]');
                        if ($(input).prop('checked')) {
                            $(this).removeClass('checked');
                            $(input).prop('checked', false);
                        } else {
                            $(this).addClass('checked');
                            $(input).prop('checked', true);
                        }
                    });
                });

                $(function() {
                    $('#market #offersFilter').on('click', function() {
                        $('#formSearchOffers').submit();
                        $('#market .loaderContainer').fadeIn(500);
                    });
                    $('#market a[href="?allOffers"]').on('click', function() {
                        $('#market .loaderContainer').fadeIn(500);
                    });
                    $('#market .dropdown-menu a').on('click', function() {
                        $('#market .loaderContainer').fadeIn(500);
                    });
                });
            </script>
        </metal:content-core>
    </body>
</html>
