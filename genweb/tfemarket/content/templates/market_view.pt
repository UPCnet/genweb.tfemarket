<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="ca"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="genweb.tfemarket">

    <body>
      <metal:content-core fill-slot="content-core">
        <metal:block define-macro="content-core"
                     tal:define="offers view/getOffers">
            <div metal:use-macro="context/batch_macros/macros/navigation" />
            <div id="offers">
                <div id="contentSearchOffers">
                  <div id="headerSearchOffers">
                    <h2 style="margin-top:0px; text-align: left;" i18n:translate="">Search</h2>
                    <div style="float:right;" class="documentDescription">
                        <span id="expandSearch"><span i18n:translate="">Show</span> <i style="color: #557c95" class="fa fa-chevron-down" aria-hidden="true"></i></span>
                        <span id="collapseSearch"><span i18n:translate="">Hide</span> <i style="color: #557c95" class="fa fa-chevron-up" aria-hidden="true"></i></span>
                    </div>
                  </div>
                  <form id="searchOffers" name="searchOffers" action="" method="post"
                        tal:define="save view/saveFilters">
                    <label i18n:translate="">Text to search</label>
                    <input type="text" id="searchTitle" name="title" tal:attributes="value save/title|nothing" />

                    <label i18n:translate="">Degree</label>
                    <select id="searchDegree" name="degree" tal:attributes="value save/degree|nothing">
                      <option value="all">All</option>
                      <!-- <tal:block tal:repeat="certification view/listCertifications">
                        <option value="certification" tal:content="certification">Certification</option>
                      </tal:block> -->
                    </select>

                    <label i18n:translate="">Departament</label>
                    <select id="searchDepartament" name="departament" tal:attributes="value save/departament|nothing">
                      <option value="all">All</option>
                      <!-- <tal:block tal:repeat="certification view/listCertifications">
                        <option value="certification" tal:content="certification">Certification</option>
                      </tal:block> -->
                    </select>

                    <label i18n:translate="">Company</label>
                    <select id="searchCompany" name="company" tal:attributes="value save/company|nothing">
                      <option value="all" i18n:translate="">All</option>
                      <!-- <tal:block tal:repeat="certification view/listCertifications">
                        <option value="certification" tal:content="certification">Certification</option>
                      </tal:block> -->
                    </select>

                    <label i18n:translate="">Date</label>
                    <select id="searchDate" name="date">
                      <tal:block tal:repeat="date view/getDates">
                        <tal:block tal:define="selected python: save.has_key('date') and date == save['date']">
                          <option tal:attributes="value date" tal:condition="selected" tal:content="date" selected>
                            Date
                          </option>
                          <option tal:attributes="value date" tal:condition="not:selected" tal:content="date">
                            Date
                          </option>
                        </tal:block>
                      </tal:block>
                    </select>

                    <label i18n:translate="">Keywords</label>
                    <br>
                    <br>

                    <input type="checkbox" id="searchGrant" name="grant" />
                    <span i18n:translate="">With the possibility of offering grant/financing</span>

                    <div class="multicheckLine" id="searchLanguage">
                      <label i18n:translate="">Developer language</label>
                      <tal:block tal:repeat="lang view/getLanguages">
                        <input type="checkbox" name="language"
                               tal:attributes="value lang;" />
                        <span tal:content="lang">Language</span>
                      </tal:block>
                    </div>

                    <div class="multicheckLine" id="searchModality">
                      <label i18n:translate="">Modality</label>
                      <tal:block tal:repeat="modality view/getModalities">
                        <input type="checkbox" name="modality"
                               tal:attributes="value modality;" />
                        <span tal:content="modality">Modality</span>
                      </tal:block>
                    </div>

                    <button type="submit" id="offersFilter" form="offersFilter">
                      <span class="fa fa-search"></span>
                      <span i18n:translate="">Search</span>
                    </button>
                  </form>
                </div>
                <div class="clearfix"></div>
                <div id="headerOffers" tal:condition="offers">
                  <h2 style="margin-top:0px; text-align: left; float: left;" i18n:translate="">All TFE's</h2>
                  <div style="float:right;" class="documentDescription">
                      <span id="expandAll" i18n:translate="">Desplega tot <i style="color: #557c95" class="fa fa-chevron-down" aria-hidden="true"></i></span>
                      <span id="collapseAll" i18n:translate="">Plega tot <i style="color: #557c95" class="fa fa-chevron-up" aria-hidden="true"></i></span>
                  </div>
                </div>
                <ul id="offersList" tal:condition="offers">
                    <tal:offers repeat="offer offers">
                        <li class="unstyled offer">
                            <div class="puntTitle span12">
                                <div class="span1 fletxaSpan">
                                    <button type="button" class="expand"
                                            data-original-title="Expand">
                                        <i style="color: #557c95" class="fa fa-chevron-down" aria-hidden="true"></i>
                                    </button>
                                    <button type="button" class="notexpand"
                                            data-original-title="Collapse">
                                        <i  style="color: #557c95" class="fa fa-chevron-up" aria-hidden="true"></i>
                                    </button>
                                </div>
                                <div class="span10 titleSpan">
                                    <h3><a tal:attributes="href offer/url">
                                        <tal:omit-tag tal:content="offer/title">Item Title</tal:omit-tag>
                                    </a></h3>
                                </div>
                                <div class="span1 boleta">
                                    <span class="btn label disabled" style="padding:3px; float: right;">
                                        <i class="fa fa-circle" aria-hidden="true"></i>&nbsp;<span tal:content="offer/state"></span>
                                    </span>
                                </div>
                            </div>
                            <div class="sortable2 offerdata">
                              <div class="informacioTFE">
                                <div class="leftInfoOffer">
                                  <p class="identifier">
                                    <span class="field"><span i18n:translate="">Identifier</span>: </span>
                                    <span tal:content="offer/UID">123456 AB</span>
                                  </p>
                                  <p class="center">
                                    <span class="field"><span i18n:translate="">Center</span>: </span>
                                    <span>0111-Q</span>
                                  </p>
                                  <p class="departament">
                                    <span class="field"><span i18n:translate="">Departament</span>: </span>
                                    <span tal:content="offer/dept">37</span>
                                  </p>
                                </div>
                                <div class="rightInfoOffer">
                                  <p class="creationDate">
                                    <span class="field"><span i18n:translate="">Creation date</span>: </span>
                                    <span tal:content="offer/creation_date">2018/01/29</span>
                                  </p>
                                  <p class="expirationDate" tal:condition="offer/expiration_date">
                                    <span class="field"><span i18n:translate="">Expiration date</span>: </span>
                                    <span tal:content="offer/expiration_date">2018/04/29</span>
                                  </p>
                                </div>
                                <div class="leftInfoOffer">
                                  <p class="teacher">
                                    <span class="field"><span i18n:translate="">Teacher manager</span>: </span>
                                    <span tal:content="offer/teacher_manager">Aureli Condogvia</span>
                                  </p>
                                  <p class="degrees">
                                    <span class="field"><span i18n:translate="">Degress</span>: </span>
                                    <span>Degree 1 - Degree 2</span>
                                  </p>
                                  <p class="modality">
                                    <span class="field"><span i18n:translate="">Modality</span>: </span>
                                    <span tal:content="offer/modality">Modalitat</span>
                                  </p>
                                </div>
                                <div class="leftInfoOffer">
                                  <p class="description">
                                    <span class="field"><span i18n:translate="">Description</span>: </span>
                                    <span tal:content="offer/description">Nam fermentum tellus vel tellus imperdiet, consectetur finibus sem mattis. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Curabitur eu maximus nulla, vitae rhoncus sem. Pellentesque efficitur, tellus vel luctus dictum, nunc tellus cursus nulla, eget aliquam lacus lacus non lectus. Nam molestie ex dolor, quis pulvinar tortor volutpat rutrum. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Suspendisse nec ligula sit amet quam hendrerit vestibulum. Nunc ut mauris lorem. Praesent non sollicitudin eros, non vestibulum erat. Nulla facilisi.</span>
                                  </p>
                                </div>
                                <div class="leftInfoOffer">
                                  <p class="features">
                                    <span class="field"><span i18n:translate="">Features</span>: </span>
                                    <span class="raw" tal:content="offer/features">Sed quis pretium urna. Aenean at elit non est posuere vestibulum a sit amet nisl. Integer efficitur aliquam arcu sit amet pulvinar. Phasellus tincidunt elementum tortor egestas tincidunt. Aenean elementum nec massa aliquam porttitor.</span>
                                  </p>
                                </div>
                                <div class="leftInfoOffer">
                                  <p class="language">
                                    <span class="field"><span i18n:translate="">Language work elaboration</span>: </span>
                                    <span tal:content="offer/lang">Català</span>
                                  </p>
                                  <p class="environmentalTheme">
                                    <span class="field"><span i18n:translate="">Environmental theme</span>: </span>
                                    <span tal:content="offer/environmental_theme">Temàtica oberta</span>
                                  </p>
                                  <p class="requirements">
                                    <span class="field"><span i18n:translate="">Requirements</span>: </span>
                                    <span tal:content="offer/requirements">Cap</span>
                                  </p>
                                  <p class="grant">
                                    <span class="field"><span i18n:translate="">Possibility of scholarship</span>: </span>
                                    <span tal:condition="offer/grant" i18n:translate="">Yes</span>
                                    <span tal:condition="offer/grant" i18n:translate="">No</span>
                                  </p>
                                  <p class="keywords">
                                    <span class="field"><span i18n:translate="">Keywords</span>: </span>
                                    <tal:block tal:repeat="keyword offer/keywords">
                                      <span class="keyword" tal:content="keyword">Keyword</span>
                                    </tal:block>
                                  </p>
                                </div>
                              </div>
                            </div>
                            <div tal:define="applications python:view.getApplications(offer)"
                                 tal:condition="applications"
                                 class="sortable2 applications">
                                <tal:applications repeat="app applications">
                                    <ol>
                                        <div>
                                            <div class="span9">
                                                <a tal:attributes="href app/url">
                                                    <tal:omit-tag tal:content="app/title">Item Title</tal:omit-tag>
                                                </a>
                                            </div>
                                            <div class="span2">
                                                  <i class="fa fa-circle" aria-hidden="true"></i>
                                                <tal:block tal:define="estat app/state">
                                                    <span class="btn label disabled" style="padding:3px; float: right;">
                                                    <i class="fa fa-circle" aria-hidden="true"></i>&nbsp;<span tal:content="estat"></span>
                                                    </span>
                                                </tal:block>
                                            </div>
                                        </div>
                                    </ol>
                                </tal:applications>
                            </div>
                        </li>
                    </tal:offers>
                </ul>
        </div>
        </metal:block>



  <script type="text/javascript">
    $(function() {
        $('p.features span.raw').each(function(){
          $(this).html( $(this).text() );
        });

        $('.expand').click(function(){
           $(this).hide();
           $(this).parent().find('.notexpand').show();
           $(this).parent().parent().parent().find('.sortable2').slideDown();
        });

        $('.notexpand').click(function(){
           $(this).hide();
           $(this).parent().find('.expand').show();
           $(this).parent().parent().parent().find('.sortable2').slideUp();
        });

        $("#headerSearchOffers").click(function(){
          if( $("#collapseSearch").is(":visible") ){
            $("#searchOffers").slideUp();
            $("#expandSearch").show();
            $("#collapseSearch").hide();
          }else{
            $("#searchOffers").slideDown();
            $("#expandSearch").hide();
            $("#collapseSearch").show();
          }
        });

        $("#expandAll").click(function(){
          $(".expand").parent().parent().parent().slideDown();
          $(".expand").hide();
          $(".notexpand").show();
          $(".expand").parent().parent().parent().find('.sortable2').slideDown();
          $("#expandAll").hide();
          $("#collapseAll").show();
        })

        $("#collapseAll").click(function(){
          $(".notexpand").slideUp();
          $(".notexpand").hide();
          $(".expand").show();
          $(".expand").parent().parent().parent().find('.sortable2').slideUp();
          $("#expandAll").show();
          $("#collapseAll").hide();
        })

        $('input[name="language"]').prop('checked', true);
        $('input[name="modality"]').prop('checked', true);
    });
  </script>

  <script type="text/javascript">
    $(function() {
      $('#offersFilter').on('click', function(){
        $('#searchOffers').submit()
      });
    });
  </script>
</metal:content-core>
</body>
</html>
